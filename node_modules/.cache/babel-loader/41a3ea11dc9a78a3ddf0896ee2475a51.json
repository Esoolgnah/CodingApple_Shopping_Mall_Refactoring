{"ast":null,"code":"import _toConsumableArray from\"/Users/esoolgnah/Desktop/Projects/\\u1109\\u116D\\u1111\\u1175\\u11BC\\u1106\\u1169\\u11AF \\u1111\\u1173\\u1105\\u1169\\u110C\\u1166\\u11A8\\u1110\\u1173 \\u1105\\u1175\\u1111\\u1162\\u11A8\\u1110\\u1169\\u1105\\u1175\\u11BC/CodingApple_Shopping_Mall_Refactoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _slicedToArray from\"/Users/esoolgnah/Desktop/Projects/\\u1109\\u116D\\u1111\\u1175\\u11BC\\u1106\\u1169\\u11AF \\u1111\\u1173\\u1105\\u1169\\u110C\\u1166\\u11A8\\u1110\\u1173 \\u1105\\u1175\\u1111\\u1162\\u11A8\\u1110\\u1169\\u1105\\u1175\\u11BC/CodingApple_Shopping_Mall_Refactoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";/* import CSS */import'../styles/components/Cart/Cart.css';import notice from'../images/cartNotice.jpeg';/* import Library */import axios from'axios';import React,{useEffect,useState}from'react';import{useHistory}from'react-router-dom';import{Table}from'react-bootstrap';import{useDispatch,useSelector}from'react-redux';/* import Component */import CheckBox from'../components/Cart/CheckBox.js';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";function Cart(props){var dispatch=useDispatch();var history=useHistory();var state=useSelector(function(state){return state;});var sum=0;var checkedId=new Set();for(var i=0;i<state.reducer.length;i++){checkedId.add(state.reducer[i].id);}/* checkList 상태 */var _useState=useState(true),_useState2=_slicedToArray(_useState,2),allBChecked=_useState2[0],setAllBChecked=_useState2[1];var _useState3=useState(true),_useState4=_slicedToArray(_useState3,2),allChecked=_useState4[0],setAllChecked=_useState4[1];var _useState5=useState(checkedId),_useState6=_slicedToArray(_useState5,2),checkList=_useState6[0],setCheckList=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),checkClicked=_useState8[0],setCheckClicked=_useState8[1];for(var j=0;j<state.reducer.length;j++){if(checkList.has(state.reducer[j].id)==true){sum+=state.reducer[j].price*state.reducer[j].quan;}}var orderTitleStyle={textAlign:'left',fontWeight:'bold',top:'50px',paddingLeft:'10px',borderBottom:'2.5px solid black'};var amountBtnStyle={fontWeight:'bold',cursor:'pointer',marginBottom:'3px'};var orderBtnStyle={width:'100%',height:'50px',fontSize:'20px',fontWeight:'bold'};var changeAllChecked=function changeAllChecked(){setAllBChecked(!allBChecked);setCheckClicked(true);};/* 숫자에 콤마(,)추가하여 표시 */var addComma=function addComma(num){var regexp=/\\B(?=(\\d{3})+(?!\\d))/g;return num.toString().replace(regexp,',');};useEffect(function(){if(allBChecked===true){for(var _i=0;_i<state.reducer.length;_i++){checkedId.add(state.reducer[_i].id);}setCheckList(checkedId);}else{if(checkClicked===true){var copy=new Set();setCheckList(copy);setCheckClicked(false);}}},[allBChecked]);useEffect(function(){setCheckClicked(false);if(state.reducer.length===checkList.size){setAllChecked(true);setAllBChecked(true);}else{setAllChecked(false);setAllBChecked(false);}},[checkList]);var increaseData=function increaseData(a){dispatch({type:'수량증가',데이터:a.id});};var decreaseData=function decreaseData(a){dispatch({type:'수량감소',데이터:a.id});};var deleteData=function deleteData(a){dispatch({type:'상품삭제',데이터:a.id});};var goDetailPage=function goDetailPage(id){if(props.shoes.length<4){axios.get('https://codingapple1.github.io/shop/data2.json').then(function(result){if(result.data)props.shoes변경([].concat(_toConsumableArray(props.shoes),_toConsumableArray(result.data)));}).catch(function(){console.log('실패');});}setTimeout(function(){history.push('/detail/'+id);},1000);};return/*#__PURE__*/_jsxs(_Fragment,{children:[state.reducer.length>0?/*#__PURE__*/_jsxs(\"div\",{id:\"container\",children:[/*#__PURE__*/_jsxs(Table,{responsive:true,children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{class:\"col-md-1\",children:/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",checked:allChecked,onChange:changeAllChecked})}),/*#__PURE__*/_jsx(\"th\",{class:\"col-md-1\"}),/*#__PURE__*/_jsx(\"th\",{class:\"col-md-2\",children:\"\\uC0C1\\uD488\\uBA85\"}),/*#__PURE__*/_jsx(\"th\",{class:\"col-md-2\",children:\"\\uAC00\\uACA9\"}),/*#__PURE__*/_jsx(\"th\",{class:\"col-md-1\",children:\"\\uC218\\uB7C9\"}),/*#__PURE__*/_jsx(\"th\",{class:\"col-md-1\",children:\"\\uBC30\\uC1A1\\uBE44\"}),/*#__PURE__*/_jsx(\"th\",{class:\"col-md-1\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:state.reducer.map(function(a,i){return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(CheckBox,{index:i,id:a.id,price:a.price,quan:a.quan,checkList:checkList,setCheckList:setCheckList})}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"img\",{className:\"itemImg opacity\",onClick:function onClick(){goDetailPage(a.id);},src:a.image,width:\"150px\"})}),/*#__PURE__*/_jsx(\"td\",{children:a.name}),/*#__PURE__*/_jsxs(\"td\",{children:[addComma(a.price),\"\\uC6D0\"]}),/*#__PURE__*/_jsxs(\"td\",{children:[' ',/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-default\",style:amountBtnStyle,onClick:function onClick(){increaseData(a);},children:\"+\"}),a.quan,/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-default\",style:amountBtnStyle,onClick:function onClick(){decreaseData(a);},children:\"-\"})]}),/*#__PURE__*/_jsx(\"td\",{children:\"\\uBB34\\uB8CC\"}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-default\",style:amountBtnStyle,onClick:function onClick(){deleteData(a);},children:\"x\"})})]},i);})})]}),/*#__PURE__*/_jsxs(\"div\",{id:\"orderWrapper\",children:[/*#__PURE__*/_jsx(\"h1\",{style:orderTitleStyle,children:\"\\uC8FC\\uBB38\\uD569\\uACC4\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"orderTable\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"priceWrapper\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"\\uACB0\\uC81C\\uC608\\uC815\\uAE08\\uC561\"}),/*#__PURE__*/_jsx(\"h3\",{children:\"\".concat(addComma(sum),\"\\uC6D0\")})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"priceWrapper\",children:[/*#__PURE__*/_jsx(\"p\",{children:\"\\uC0C1\\uD488\\uAE08\\uC561 \\uD569\\uACC4\"}),/*#__PURE__*/_jsx(\"p\",{children:\" \".concat(addComma(sum),\"\\uC6D0\")})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"priceWrapper\",children:[/*#__PURE__*/_jsx(\"p\",{children:\"\\uBC30\\uC1A1\\uBE44 \\uD569\\uACC4\"}),/*#__PURE__*/_jsx(\"p\",{children:\" + 0\\uC6D0\"})]}),/*#__PURE__*/_jsx(\"button\",{className:\"btn-primary opacity\",style:orderBtnStyle,children:\"\\uCD1D \".concat(addComma(sum),\"\\uC6D0 \\uC8FC\\uBB38\\uD558\\uAE30\")})]})]})]}):/*#__PURE__*/_jsxs(\"div\",{id:\"noticeWrapper\",children:[/*#__PURE__*/_jsx(\"img\",{className:\"noticeImg\",src:notice}),/*#__PURE__*/_jsx(\"p\",{className:\"notice\",children:\"\\uC7A5\\uBC14\\uAD6C\\uB2C8\\uAC00 \\uBE44\\uC5B4\\uC788\\uC2B5\\uB2C8\\uB2E4.\"})]}),props.alert열렸니?/*#__PURE__*/_jsxs(\"div\",{className:\"my-alert\",children:[/*#__PURE__*/_jsx(\"p\",{children:\"\\uC9C0\\uAE08 \\uAD6C\\uB9E4\\uD558\\uC2DC\\uBA74 20% \\uD560\\uC778\"}),/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){dispatch({type:'alert닫기'});},children:\"\\uB2EB\\uAE30\"})]}):null]});}export default Cart;","map":{"version":3,"sources":["/Users/esoolgnah/Desktop/Projects/쇼핑몰 프로젝트 리팩토링/CodingApple_Shopping_Mall_Refactoring/src/pages/Cart.js"],"names":["notice","axios","React","useEffect","useState","useHistory","Table","useDispatch","useSelector","CheckBox","Cart","props","dispatch","history","state","sum","checkedId","Set","i","reducer","length","add","id","allBChecked","setAllBChecked","allChecked","setAllChecked","checkList","setCheckList","checkClicked","setCheckClicked","j","has","price","quan","orderTitleStyle","textAlign","fontWeight","top","paddingLeft","borderBottom","amountBtnStyle","cursor","marginBottom","orderBtnStyle","width","height","fontSize","changeAllChecked","addComma","num","regexp","toString","replace","copy","size","increaseData","a","type","데이터","decreaseData","deleteData","goDetailPage","shoes","get","then","result","data","shoes변경","catch","console","log","setTimeout","push","map","image","name","alert열렸니"],"mappings":"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","sourcesContent":["/* import CSS */\nimport '../styles/components/Cart/Cart.css';\nimport notice from '../images/cartNotice.jpeg';\n/* import Library */\nimport axios from 'axios';\nimport React, { useEffect, useState } from 'react';\nimport { useHistory } from 'react-router-dom';\nimport { Table } from 'react-bootstrap';\nimport { useDispatch, useSelector } from 'react-redux';\n/* import Component */\nimport CheckBox from '../components/Cart/CheckBox.js';\n\nfunction Cart(props) {\n  let dispatch = useDispatch();\n  let history = useHistory();\n  let state = useSelector((state) => state);\n\n  let sum = 0;\n  let checkedId = new Set();\n\n  for (let i = 0; i < state.reducer.length; i++) {\n    checkedId.add(state.reducer[i].id);\n  }\n\n  /* checkList 상태 */\n  const [allBChecked, setAllBChecked] = useState(true);\n  const [allChecked, setAllChecked] = useState(true);\n  const [checkList, setCheckList] = useState(checkedId);\n  const [checkClicked, setCheckClicked] = useState(false);\n\n  for (let j = 0; j < state.reducer.length; j++) {\n    if (checkList.has(state.reducer[j].id) == true) {\n      sum += state.reducer[j].price * state.reducer[j].quan;\n    }\n  }\n\n  const orderTitleStyle = {\n    textAlign: 'left',\n    fontWeight: 'bold',\n    top: '50px',\n    paddingLeft: '10px',\n    borderBottom: '2.5px solid black',\n  };\n\n  const amountBtnStyle = {\n    fontWeight: 'bold',\n    cursor: 'pointer',\n    marginBottom: '3px',\n  };\n\n  const orderBtnStyle = {\n    width: '100%',\n    height: '50px',\n    fontSize: '20px',\n    fontWeight: 'bold',\n  };\n\n  const changeAllChecked = () => {\n    setAllBChecked(!allBChecked);\n    setCheckClicked(true);\n  };\n\n  /* 숫자에 콤마(,)추가하여 표시 */\n  const addComma = (num) => {\n    let regexp = /\\B(?=(\\d{3})+(?!\\d))/g;\n    return num.toString().replace(regexp, ',');\n  };\n\n  useEffect(() => {\n    if (allBChecked === true) {\n      for (let i = 0; i < state.reducer.length; i++) {\n        checkedId.add(state.reducer[i].id);\n      }\n      setCheckList(checkedId);\n    } else {\n      if (checkClicked === true) {\n        let copy = new Set();\n        setCheckList(copy);\n        setCheckClicked(false);\n      }\n    }\n  }, [allBChecked]);\n\n  useEffect(() => {\n    setCheckClicked(false);\n\n    if (state.reducer.length === checkList.size) {\n      setAllChecked(true);\n      setAllBChecked(true);\n    } else {\n      setAllChecked(false);\n      setAllBChecked(false);\n    }\n  }, [checkList]);\n\n  const increaseData = (a) => {\n    dispatch({ type: '수량증가', 데이터: a.id });\n  };\n  const decreaseData = (a) => {\n    dispatch({ type: '수량감소', 데이터: a.id });\n  };\n  const deleteData = (a) => {\n    dispatch({ type: '상품삭제', 데이터: a.id });\n  };\n\n  const goDetailPage = (id) => {\n    if (props.shoes.length < 4) {\n      axios\n        .get('https://codingapple1.github.io/shop/data2.json')\n        .then((result) => {\n          if (result.data) props.shoes변경([...props.shoes, ...result.data]);\n        })\n        .catch(() => {\n          console.log('실패');\n        });\n    }\n\n    setTimeout(() => {\n      history.push('/detail/' + id);\n    }, 1000);\n  };\n\n  return (\n    <>\n      {state.reducer.length > 0 ? (\n        <div id='container'>\n          <Table responsive>\n            <thead>\n              <tr>\n                <th class='col-md-1'>\n                  <input\n                    type='checkbox'\n                    checked={allChecked}\n                    onChange={changeAllChecked}\n                  />\n                </th>\n                <th class='col-md-1'>{/*상품이미지*/}</th>\n                <th class='col-md-2'>상품명</th>\n                <th class='col-md-2'>가격</th>\n                <th class='col-md-1'>수량</th>\n                <th class='col-md-1'>배송비</th>\n                <th class='col-md-1'>{/*삭제버튼*/}</th>\n              </tr>\n            </thead>\n            <tbody>\n              {state.reducer.map((a, i) => {\n                return (\n                  <tr key={i}>\n                    <td>\n                      <CheckBox\n                        index={i}\n                        id={a.id}\n                        price={a.price}\n                        quan={a.quan}\n                        checkList={checkList}\n                        setCheckList={setCheckList}\n                      />\n                    </td>\n                    <td>\n                      <img\n                        className='itemImg opacity'\n                        onClick={() => {\n                          goDetailPage(a.id);\n                        }}\n                        src={a.image}\n                        width='150px'\n                      />\n                    </td>\n                    <td>{a.name}</td>\n                    <td>{addComma(a.price)}원</td>\n                    <td>\n                      {' '}\n                      <button\n                        className='btn btn-default'\n                        style={amountBtnStyle}\n                        onClick={() => {\n                          increaseData(a);\n                        }}\n                      >\n                        +\n                      </button>\n                      {a.quan}\n                      <button\n                        className='btn btn-default'\n                        style={amountBtnStyle}\n                        onClick={() => {\n                          decreaseData(a);\n                        }}\n                      >\n                        -\n                      </button>\n                    </td>\n                    <td>무료</td>\n                    <td>\n                      <button\n                        className='btn btn-default'\n                        style={amountBtnStyle}\n                        onClick={() => {\n                          deleteData(a);\n                        }}\n                      >\n                        x\n                      </button>\n                    </td>\n                  </tr>\n                );\n              })}\n            </tbody>\n          </Table>\n          <div id='orderWrapper'>\n            <h1 style={orderTitleStyle}>주문합계</h1>\n            <div className='orderTable'>\n              <div className='priceWrapper'>\n                <h3>결제예정금액</h3>\n                <h3>{`${addComma(sum)}원`}</h3>\n              </div>\n              <div className='priceWrapper'>\n                <p>상품금액 합계</p>\n                <p>{` ${addComma(sum)}원`}</p>\n              </div>\n              <div className='priceWrapper'>\n                <p>배송비 합계</p>\n                <p> + 0원</p>\n              </div>\n\n              <button className='btn-primary opacity' style={orderBtnStyle}>\n                {`총 ${addComma(sum)}원 주문하기`}\n              </button>\n            </div>\n          </div>\n        </div>\n      ) : (\n        <div id='noticeWrapper'>\n          <img className='noticeImg' src={notice} />\n          <p className='notice'>장바구니가 비어있습니다.</p>\n        </div>\n      )}\n      {props.alert열렸니 ? (\n        <div className='my-alert'>\n          <p>지금 구매하시면 20% 할인</p>\n          <button\n            onClick={() => {\n              dispatch({ type: 'alert닫기' });\n            }}\n          >\n            닫기\n          </button>\n        </div>\n      ) : null}\n    </>\n  );\n}\n\nexport default Cart;\n"]},"metadata":{},"sourceType":"module"}